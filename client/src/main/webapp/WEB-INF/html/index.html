<!doctype html>
<html ng-app="EstatesFinderApp">
<head>
<meta charset="utf-8">
<title>Zoznam bytov</title>
<link rel="stylesheet"
	href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="resources/css/dashboard.css">
<link rel="stylesheet" href="resources/css/estateList.css">
<link rel="icon" type="image/x-icon" href="resources/favicon.ico">
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script
	src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</head>
<body ng-controller="EstatesController">
	<!--workaround for error message truncating in Chrome-->
	<script>
		//5th parameter is the key one
		window.onerror = function(errorMsg, url, lineNumber, columnNumber,
				errorObject) {
			var errMsg;
			if (errorObject && errorObject !== undefined) {
				errMsg = errorObject.message;
			} else {
				errMsg = errorMsg;
			}
			console.log('Error: ' + errMsg);
		}
	</script>

	<div class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button data-target=".navbar-collapse" data-toggle="collapse"
					class="navbar-toggle" type="button">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a href="/" class="navbar-brand">Estate Finder</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a class="btn" ng-click="collectNow()">Collect now</a></li>
					<li><a class="btn" href="/delete">Delete</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a>Total: <span class="badge">{{estates.length}}</span></a></li>
					<li><a>Last update: {{lastUpdate | date:'dd.MM.yyyy	HH:mm'}} <span ng-if="!lastUpdate">N/A</span>
					</a></li>
				</ul>
			</div>
		</div>
	</div>
	<p class="time"></p>
	<div class="clearer"></div>
	<table>
		<tbody>
			<tr ng-repeat="estate in estates">
				<td>
					<div class="inzerat">
						<div class="photo-border advertisement-photo">
							<a href="{{estate.url}}" target="_blank"> <img
								alt="{{estate.title}}" data-src="{{estate.thumbnail}}"
								src="{{estate.thumbnail}}">
							</a>
						</div>

						<div class="inzerat-content">
							<div class="advertisement-head ">
								<h2>
									<a href="{{estate.url}}" target="_blank" title="{{estate.id}}">{{estate.title}}</a>
								</h2>
							</div>
							<div class="locationText bold red">{{estate.street}}</div>
							<ul class="inzeratList">
								<li class="inzeratList estate-area s">Plocha: <span
									class="red">{{estate.area}} m<sup>2</sup>
								</span>
								</li>
								<li ng-repeat="note in estate.notes"
									class="inzeratList advertisement-condition s">{{note}}</li>
							</ul>
							<p class="advertisement-content-p grey">{{estate.short_text}}</p>
							<div class="advertisement-rightpanel">
								<p class="cena">
									<span class="tlste red"> {{estate.price}} &euro;</span>
								</p>
								<p class="time">
									<span class="tlste">{{estate.timestamp |
										date:'dd.MM.yyyy HH:mm'}} </span> <input name="selected"
										type="checkbox" value="{{estate.id}}" />
								</p>
							</div>
						</div>
						<div class="clearer"></div>
					</div>
				</td>
			</tr>
		</tbody>
	</table>

	<script
		src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>
	<script src="resources/js/App.js"></script>
	<script src="resources/js/EstatesController.js"></script>
</body>

</html>
